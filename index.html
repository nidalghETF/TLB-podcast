<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Visualizer: Real Estate & Blockchain Theme</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.sound.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0e17;
            color: #e0e0e0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }
        header {
            text-align: center;
            margin-bottom: 2rem;
            max-width: 800px;
        }
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            font-size: 1.2rem;
            color: #88aaff;
            margin-bottom: 1.5rem;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            width: 100%;
            max-width: 1200px;
        }
        .visualizer-container {
            width: 100%;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
            background: #111827;
            border: 1px solid #1e293b;
        }
        #canvasContainer {
            width: 100%;
            height: 500px;
        }
        .player-panel {
            background: #1a202c;
            padding: 1.5rem 2rem;
            border-radius: 12px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            border: 1px solid #2d3748;
        }
        .audio-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        button {
            background: linear-gradient(90deg, #0066cc, #00aaff);
            color: white;
            border: none;
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 170, 255, 0.4);
        }
        button#pauseBtn {
            background: linear-gradient(90deg, #cc6600, #ffaa00);
        }
        .progress-container {
            width: 100%;
        }
        .time-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #88aaff;
        }
        progress {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            border: none;
        }
        progress::-webkit-progress-bar {
            background-color: #2d3748;
            border-radius: 5px;
        }
        progress::-webkit-progress-value {
            background: linear-gradient(90deg, #00ff88, #00d4ff);
            border-radius: 5px;
        }
        .theme-description {
            background: #1a202c;
            padding: 1.5rem;
            border-radius: 12px;
            border-left: 5px solid #00ff88;
            margin-top: 1rem;
            font-size: 1rem;
            line-height: 1.6;
        }
        .theme-description h3 {
            color: #00ff88;
            margin-bottom: 0.5rem;
        }
        footer {
            margin-top: 3rem;
            text-align: center;
            color: #6b7280;
            font-size: 0.9rem;
            padding: 1rem;
        }
        @media (max-width: 768px) {
            body { padding: 1rem; }
            h1 { font-size: 2rem; }
            #canvasContainer { height: 350px; }
            .player-panel { padding: 1rem; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Real Estate & Blockchain Audio Visualizer</h1>
        <p class="subtitle">A generative visualization that turns audio into a dynamic cityscape and blockchain network</p>
    </header>

    <main class="container">
        <section class="visualizer-container">
            <div id="canvasContainer"></div>
        </section>

        <!-- In index.html, replace the player-panel section with this: -->
<section class="player-panel">
    <div class="audio-controls">
        <div class="part-selector">
            <button id="part1Btn" class="part-btn active" data-file="audio-part1.mp3">
                Part 1 (0:00-22:00)
            </button>
            <button id="part2Btn" class="part-btn" data-file="audio-part2.mp3">
                Part 2 (22:00-44:00)
            </button>
        </div>
        
        <div class="playback-controls">
            <button id="playBtn">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3 2l10 6-10 6z"/></svg>
                Play
            </button>
            <button id="pauseBtn">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><rect x="3" y="2" width="4" height="12"/><rect x="9" y="2" width="4" height="12"/></svg>
                Pause
            </button>
            <button id="restartBtn">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 3v2.5l4-2.5v8l-4-2.5V13c-3.5 0-6-2.5-6-6s2.5-6 6-6z"/></svg>
                Restart
            </button>
        </div>
        
        <div class="volume-control">
            <label for="volumeSlider">Volume:</label>
            <input type="range" id="volumeSlider" min="0" max="100" value="80">
        </div>
    </div>

    <div class="progress-container">
        <div class="time-info">
            <span id="currentTime">0:00</span>
            <span id="partIndicator">Part 1/2</span>
            <span id="totalTime">0:00</span>
        </div>
        <progress id="progressBar" value="0" max="100"></progress>
    </div>
</section>

        <section class="theme-description">
            <h3>Visualization Theme Explained</h3>
            <p><strong>Real Estate (Skyline):</strong> The blue buildings represent property values—their height reacts to low-frequency sounds (bass). Taller buildings indicate stronger low-end audio.</p>
            <p><strong>Blockchain Network:</strong> The green nodes and connecting lines represent a decentralized ledger. Their activity (pulse speed, connection brightness) is driven by high-frequency sounds (treble). Brighter, faster pulses mean more high-frequency energy.</p>
            <p>The visualization combines these two concepts to create a unique representation of your audio's frequency spectrum.</p>
        </section>
    </main>

    <footer>
        <p>Created with p5.js & p5.sound • Upload your MP3 and host on GitHub Pages</p>
    </footer>

    <script src="sketch.js"></script>
    <script>
        // DOM element references
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const restartBtn = document.getElementById('restartBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const progressBar = document.getElementById('progressBar');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');

        // Format time as MM:SS
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Update progress bar and time display
        function updateProgress() {
            if (window.soundFile && window.soundFile.isLoaded()) {
                const current = window.soundFile.currentTime();
                const duration = window.soundFile.duration();
                const progress = (current / duration) * 100;
                
                progressBar.value = progress;
                currentTimeEl.textContent = formatTime(current);
                totalTimeEl.textContent = formatTime(duration);
            }
            requestAnimationFrame(updateProgress);
        }

        // Event listeners for buttons (will be connected in sketch.js)
        playBtn.addEventListener('click', () => {
            if (window.soundFile) window.soundFile.play();
        });
        pauseBtn.addEventListener('click', () => {
            if (window.soundFile) window.soundFile.pause();
        });
        restartBtn.addEventListener('click', () => {
            if (window.soundFile) {
                window.soundFile.stop();
                window.soundFile.play();
            }
        });
        volumeSlider.addEventListener('input', (e) => {
            if (window.soundFile) {
                window.soundFile.setVolume(e.target.value / 100);
            }
        });

        // Start progress updates
        requestAnimationFrame(updateProgress);
    </script>
</body>
</html>
